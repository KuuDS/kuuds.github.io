---
title: 小文件导致inode耗尽
date: 2017-12-04 10:31:00
updated: 2017-12-05 08:55:43
---
<!--markdown-->## 现象

早上发现测试程序因为硬盘空间不够无法生成日志，一直重启。

## 过程

`df -h`之后发现硬盘还有50%可用空间，于是`df -ih`发现文件数被撑炸。

## 结论

部署`nexus`导致硬盘文件数被撑爆。反思以后应注意:

1. `nexus`应启用`task`定期清理
2. `LOG`策略需要按需设置
3. `sonatype`文件夹所在硬盘，格式化时应提供更小的文件块
4. 采用`LVM`动态扩展